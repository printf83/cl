"use strict";import*as core from"./core.js";import div from"./div.js";import li from"./li.js";import a from"./a.js";import ul from"./ul.js";import icon from"./icon.js";const defaultOption={total:0,skip:0,limit:0,max:5,weight:null,align:"center",overflow:!0,change:null,firstlast:!0,nextprev:!0,labelfirst:null,labellast:null,labelnext:null,labelprev:null,autoupdate:!0};function pagingonchange(e,l){let a=e.closest(".cl-paging"),t=a.firstChild;var i=new CustomEvent("change",{detail:{total:l.total,skip:l.skip,limit:l.limit,max:l.max,sender:e}});t.dispatchEvent(i),l.autoupdate&&core.replaceWith(a,new paging(l))}export default class paging extends div{constructor(...e){super(...e)}get data(){return super.data}set data(e){if(e){e=core.extend({},defaultOption,e);let s=core.extend({},e),r=e.skip/e.limit+1,g=parseInt(e.total/e.limit,10)+(e.total%e.limit>0?1:0);if(e.total>e.limit){let o=[];e.firstlast&&o.push(new li({class:"page-item",disabled:!(r>1),elem:new a({class:"page-link","aria-label":"First Page",href:"#",disabled:!(r>1),click:e=>{s.skip=0,pagingonchange(e.currentTarget,s)},elem:e.labelfirst?e.labelfirst:new icon({type:"fas",icon:"angle-double-left"})})})),e.nextprev&&o.push(new li({class:"page-item",disabled:!(r>1),elem:new a({class:"page-link","aria-label":"Previous Page",href:"#",disabled:!(r>1),click:e=>{s.skip=(r-2)*s.limit,pagingonchange(e.currentTarget,s)},elem:e.labelprev?e.labelprev:new icon({type:"fas",icon:"angle-left"})})}));var l=1,t=g,i=r;if(e.max>g&&(e.max=g),e.max<3&&(e.max=3),e.max%2==0&&(e.max=e.max+1),t>e.max){var n=parseInt(e.max/2,10)+1;t=i+n-1,(l=i-n+1)<1&&(l=1,t=e.max),t>g&&(l=(t=g)-e.max+1),l<1&&(l=1)}for(;l<=t;l++)o.push(new li({class:"page-item",active:l===i,elem:new a({class:"page-link","aria-label":`Page ${l.toString()}`,href:"#",click:e=>{let l=parseInt(e.currentTarget.innerText,10);s.skip=(l-1)*s.limit,pagingonchange(e.currentTarget,s)},elem:l.toString()})}));e.nextprev&&o.push(new li({class:"page-item",disabled:!(r<g),elem:new a({class:"page-link","aria-label":"Next Page",disabled:!(r<g),href:"#",click:e=>{s.skip=r*s.limit,pagingonchange(e.currentTarget,s)},elem:e.labelnext?e.labelnext:new icon({type:"fas",icon:"angle-right"})})})),e.firstlast&&o.push(new li({class:"page-item",disabled:!(r<g),elem:new a({class:"page-link","aria-label":"Last Page",disabled:!(r<g),href:"#",click:e=>{s.skip=(g-1)*s.limit,pagingonchange(e.currentTarget,s)},elem:e.labellast?e.labellast:new icon({type:"fas",icon:"angle-double-right"})})})),(e=core.merge(e,{class:["pagination",e.weight?`pagination-${e.weight}`:null]})).elem=o,delete e.total,delete e.skip,delete e.limit,delete e.max,delete e.weight,delete e.firstlast,delete e.nextprev,delete e.labelfirst,delete e.labellast,delete e.labelnext,delete e.labelprev,super.data={display:"flex",padding:3,overflow:e.overflow?"auto":null,justifyContent:e.align?e.align:null,class:"cl-paging",elem:new ul(e)},delete e.align,delete e.overflow}}}}