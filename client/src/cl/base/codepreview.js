"use strict";import css from"./css/codepreview.css";import css2 from"./css/prettify.css";import*as core from"./core.js";import*as card from"./card.js";import tag from"./tag.js";import div from"./div.js";import code from"./code.js";import pre from"./pre.js";import button from"./button.js";import toast from"./toast.js";import small from"./small.js";import b from"./b.js";const LIBNAME=/component.Z./g,LIBNAME2=/_component_js__WEBPACK_IMPORTED_MODULE_0__.Z./g,SAMPLELIBNAME=/doc_sample.Z./g,FNNAME=/list_fn./g;function beautifyjs(e){return e=(e=(e=(e=e.replace(LIBNAME2,"$.")).replace(LIBNAME,"$.")).replace(SAMPLELIBNAME,"sample.")).replace(FNNAME,"fn."),js_beautify(e,{preserve_newlines:!0,end_with_newline:!0,brace_style:"collapse"})}function beautifyhtml(e){return e=(e=e.replace(/\>/g,">\n")).replace(/\</g,"\n<"),html_beautify(e,{indent_inner_html:!0,preserve_newlines:!1,end_with_newline:!0,indent_size:4})}function beautifycss(e){return beautifyhtml(e)}function codecontainer(e,t,n,r){return[new div({position:"relative",float:"end",class:"cl-codepreview-copy",elem:new button({icon:{type:"far",icon:"clipboard"},label:"Copy",hidelabel:!0,textColor:"primary",align:"end",position:"absolute",end:0,click:e=>{let t=e.currentTarget.parentElement.nextSibling.firstChild.innerText;try{navigator.clipboard.writeText(t),new toast("/","Copied to clipboard").show()}catch(e){new toast("!!",`Error when copy code to clipboard. ${e}`).show()}}})}),new code({overflow:"auto",display:"block",maxHeight:n,elem:new pre({class:["prettyprint",`lang-${e}`,r?""+("linenums:"+(!0===r?1:r)):null],margin:0,lang:e,elem:"js"===e?beautifyjs(t):"html"===e?beautifyhtml(t):"css"===e?beautifycss(t):null})})]}const defaultOption={code:null,type:"js",linenums:null,container:"div",title:null,maxHeight:null,marginY:3};export default class codepreview extends tag{constructor(...e){super(...e)}get data(){return super.data}set data(e){(e=core.extend({},defaultOption,e)).title&&(e.container="card"),"div"===e.container?super.data={elem:[new div({marginY:e.marginY,elem:new card.body({elem:codecontainer(e.type,e.code,e.maxHeight,e.linenums)})})]}:"card"===e.container?super.data={elem:[new card.container({marginY:e.marginY,elem:[e.title?new card.header(new small(new b(e.title))):null,new card.body({elem:codecontainer(e.type,e.code,e.maxHeight,e.linenums)})].filter(Boolean)})]}:super.data={elem:codecontainer(e.type,e.code,e.maxHeight,e.linenums)}}}