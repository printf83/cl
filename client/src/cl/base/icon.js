"use strict";import css from"./css/icon.css";import*as core from"./core.js";import tag from"./tag.js";const defaultOption={tag:"i",type:"fas",icon:null,weight:null,fixwidth:!0,beat:!1,fade:!1,bounce:!1,flip:!1,shake:!1,spin:!1,rotate:null,color:null,inverse:!1,elem:null,stack:0},isImage=e=>!(!e||!(e.startsWith("/")||e.startsWith("./")||e.startsWith("../")||e.startsWith("http://")||e.startsWith("https://"))),isSVG=e=>{try{return!(!e||!e.startsWith("<svg"))}catch(t){return console.error(t.message),console.log("str",e),!1}},editSVG=(e,t)=>{e=e||"body-color";let a=getComputedStyle(document.body).getPropertyValue(`--bs-${e}`);return t=t.replace(/fill\=\"\S+\"/g,`fill="${a.trim()}"`),`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(t)}`};export default class icon extends tag{clicon=1;constructor(...e){if(super(),e&&e.length>0){let t={type:null,icon:null};t=core.args([{rule:["string","string"],fn:()=>({type:e[0],icon:e[1]})},{rule:["string"],fn:()=>({type:"fas",icon:e[0]})},{rule:["object"],fn:()=>e[0]}],"icon",e),this.data=core.extend({},defaultOption,t)}else this.data=null}get data(){return super.data}set data(e){if(e){e=core.extend({},defaultOption,e);let a=core.getBaseIcon(e.icon);a&&(e.icon=a.icon,e.color=e.color||a.color,e.type=a.type?a.type:e.type);let l=null;switch(e.rotate){case 90:case 180:case 270:l=`fa-rotate-${e.rotate}`;break;case"horizontal":case"vertical":case"both":l=`fa-flip-${e.rotate}`}e=core.merge(e,{class:[e.weight?`fa-${e.weight}`:null,e.fixwidth?"fa-fw":null,e.spin?"fa-spin":null,!e.beat&&e.fade?"fa-fade":null,e.beat&&!e.fade?"fa-beat":null,e.beat&&e.fade?"fa-beat-fade":null,e.bounce?"fa-bounce":null,e.flip?"fa-flip":null,e.shake?"fa-shake":null,e.elem?"fa-stack":null,e.stack>0?`fa-stack-${e.stack}x`:null,e.inverse?"fa-inverse":null,l]}),isSVG(e.icon)?e=core.merge(e,{tag:"img",class:"fa-cl-svg",src:editSVG(e.color,e.icon)}):e=(t=e.icon)&&(t.startsWith("/")||t.startsWith("./")||t.startsWith("../")||t.startsWith("http://")||t.startsWith("https://"))?core.merge(e,{tag:"img",class:"fa-cl-image",src:e.icon}):core.merge(e,{textColor:e.color,class:[e.type?e.type:null,e.icon?`fa-${e.icon}`:null]}),delete e.type,delete e.icon,delete e.weight,delete e.fixwidth,delete e.beat,delete e.fade,delete e.bounce,delete e.flip,delete e.shake,delete e.spin,delete e.rotate,delete e.color,delete e.inverse,delete e.stack,super.data=e}var t}}