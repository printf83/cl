"use strict";import*as base from"./base.js";export function capitalize(e){return e.toLowerCase().replace(/(^\w{1})|(\s+\w{1})/g,(e=>e.toUpperCase()))}export function rnd(e,t){if(void 0===t)t=0;else{let n=e;e=t,t=n}return Math.floor(Math.random()*(e-t+1))+t}export function shufflearray(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}const rdb={};export function randomdb(e,t){let n=t.length;if(rdb[e]||(rdb[e]={x:0}),0===rdb[e].x)if(rdb[e].i){let t=rdb[e].i[n-1];rdb[e].i=shufflearray(Array.from({length:n},((e,t)=>t))),t===rdb[e].i[0]&&(rdb[e].i[0]=rdb[e].i[n-1],rdb[e].i[n-1]=t)}else rdb[e].i=shufflearray(Array.from({length:n},((e,t)=>t)));if(rdb[e].x+1>=n)return rdb[e].x=0,randomdb(e,t);{rdb[e].x=rdb[e].x+1;let n=rdb[e].x-1;return t[rdb[e].i[n]]}}export const cookie={set:(e,t,n)=>{const r=new Date;n=t?n||7:-1,r.setTime(r.getTime()+24*n*60*60*1e3);let a="expires="+r.toUTCString();document.cookie=e+"="+t+";"+a+";samesite=strict;path=/"},get:e=>{let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let e=0;e<n.length;e++){let r=n[e];for(;" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}};export const codemarker=e=>{let t=e.getElementsByClassName("com");t&&t.length>0&&Array.prototype.forEach.call(t,(e=>{"/*marker*/"===e.innerText?e.innerHTML='<span class="nocode marker inline"></span>':""===e.innerText?e.innerHTML='<span class="nocode marker inline-end"></span>':"//marker"===e.innerText?e.innerHTML='<span class="nocode marker downline"></span>':"//-"===e.innerText&&(e.innerHTML='<span class="nocode marker downline-end"></span>')}))};export const isdarkcolor=e=>{let t=e;if(e){var n,r,a;e.match(/^rgb/)?(n=(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/))[1],r=e[2],a=e[3]):(n=(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")))>>16,r=e>>8&255,a=255&e);var s=.2126*n+.7152*r+.0722*a;return setting.DEBUG>2&&console.log(`Color ${t} luma is ${s}`),s<48?(setting.DEBUG>2&&console.log(`Color ${t} is dark`),!0):(setting.DEBUG>2&&console.log(`Color ${t} is light`),!1)}return console.warn("Color NULL is light"),!1};export const getcssvar=e=>{let t=getComputedStyle(document.body),n=t.getPropertyValue(`--bs-${e}-rgb`);if(n)return`rgb(${n})`;{let n=t.getPropertyValue(`--bs-${e}`);return n||(console.error(`Css var --bs-${e} or --bs-${e}-rgb not found`),null)}};export const loadcss=(e,t)=>{document.getElementsByTagName("body")[0];let n=document.getElementsByTagName("head")[0],r=document.createElement("link"),a=UUID();r.id=a,r.type="text/css",r.rel="stylesheet",r.onload=()=>{let e=document.getElementById(a);e&&(detachEventListener(e),e.remove()),t()},r.href=e,n.appendChild(r)};const _setting={icon:null,title:null,userchange:null,term:null,banner:null,themechange:null,debug:0};export const setting={get DEBUG(){return _setting.debug},set DEBUG(e){_setting.debug=e,base.setting.DEBUG=e},get icon(){return _setting.icon?_setting.icon:(e,t)=>({color:e||null,weight:t||null,icon:"fire"})},set icon(e){_setting.icon=e&&"function"==typeof e?e:null},get title(){return _setting.title?_setting.title:()=>"BS5.2 JS Builder"},set title(e){_setting.title=e&&"function"==typeof e?e:null},get userchange(){return _setting.userchange},set userchange(e){_setting.userchange=e},get term(){return _setting.term},set term(e){_setting.term=e},get banner(){return _setting.banner},set banner(e){_setting.banner=e},get theme(){return cookie.get("theme")},set theme(e){cookie.set("theme",e);let t=document.getElementById("css_bootstrap"),n=document.getElementById("css_bootswatch");t&&n?loadcss(e?`https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.2.2/${e}/bootstrap.min.css`:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.2/css/bootstrap.min.css",(()=>{e?(n.href=`https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.2.2/${e}/bootstrap.min.css`,n.removeAttribute("disabled"),setTimeout((()=>{t.setAttribute("disabled","disabled")}),300)):(t.removeAttribute("disabled"),setTimeout((()=>{n.setAttribute("disabled","disabled")}),300)),_setting.themechange&&"function"==typeof _setting.themechange&&_setting.themechange(e)})):console.error("#css_bootstrap and #css_bootswatch not found")},get themechange(){return _setting.themechange},set themechange(e){_setting.themechange=e}};const num2EngDB=[{value:1e15,str:"quadrillion"},{value:1e12,str:"trillion"},{value:1e9,str:"billion"},{value:1e6,str:"million"},{value:1e3,str:"thousand"},{value:100,str:"hundred"},{value:90,str:"ninety"},{value:80,str:"eighty"},{value:70,str:"seventy"},{value:60,str:"sixty"},{value:50,str:"fifty"},{value:40,str:"forty"},{value:30,str:"thirty"},{value:20,str:"twenty"},{value:19,str:"nineteen"},{value:18,str:"eighteen"},{value:17,str:"seventeen"},{value:16,str:"sixteen"},{value:15,str:"fifteen"},{value:14,str:"fourteen"},{value:13,str:"thirteen"},{value:12,str:"twelve"},{value:11,str:"eleven"},{value:10,str:"ten"},{value:9,str:"nine"},{value:8,str:"eight"},{value:7,str:"seven"},{value:6,str:"six"},{value:5,str:"five"},{value:4,str:"four"},{value:3,str:"three"},{value:2,str:"two"},{value:1,str:"one"}],num2Eng=e=>{let t="";for(let n of num2EngDB)if(e>=n.value){if(!(e<=99)){let t=Math.floor(e/n.value),r=e%n.value;return r>0?`${num2Eng(t)} ${n.str} ${num2Eng(r)}`:`${num2Eng(t)} ${n.str}`}t+=n.str,(e-=n.value)>0&&(t+=" ")}return t},num2EngThDB=[{value:1e15,str:"quadrillion"},{value:1e12,str:"trillion"},{value:1e9,str:"billion"},{value:1e6,str:"million"},{value:1e3,str:"thousand"},{value:100,str:"hundred"},{value:90,str:"ninet"},{value:80,str:"eight"},{value:70,str:"sevent"},{value:60,str:"sixt"},{value:50,str:"fift"},{value:40,str:"fourt"},{value:30,str:"thirt"},{value:20,str:"twent"},{value:19,str:"nineteenth"},{value:18,str:"eighteenth"},{value:17,str:"seventeenth"},{value:16,str:"sixteenth"},{value:15,str:"fifteenth"},{value:14,str:"fourteenth"},{value:13,str:"thirteenth"},{value:12,str:"twelvth"},{value:11,str:"eleventh"},{value:10,str:"tenth"},{value:9,str:"ninth"},{value:8,str:"eighth"},{value:7,str:"seventh"},{value:6,str:"sixth"},{value:5,str:"fifth"},{value:4,str:"fourth"},{value:3,str:"third"},{value:2,str:"second"},{value:1,str:"first"}],num2EngTh=e=>{let t="";for(let n of num2EngThDB)if(e>=n.value){if(!(e<=99)){let t=Math.floor(e/n.value),r=e%n.value;return r>0?`${num2EngTh(t)}-${n.str}-${num2EngTh(r)}`:`${num2EngTh(t)}-${n.str}`}t+=n.str,(e-=n.value)>0&&(t+=" ")}return t};export function num2En(e){return num2Eng(e)}export function num2EnT(e){return num2EngTh(e)}const _baseIcon={i:{icon:"info-circle",type:"fas",color:"primary"},"!":{icon:"exclamation-triangle",type:"fas",color:"warning"},"!!":{icon:"exclamation-triangle",type:"fas",color:"danger"},"?":{icon:"question-circle",type:"fas",color:"success"},"/":{icon:"check-circle",type:"fas",color:"success"},x:{icon:"times-circle",type:"fas",color:"danger"},"-":{icon:"minus-circle",type:"fas",color:"danger"}};export function getBaseIcon(e,t,n){if(t=t||_baseIcon,e&&"string"==typeof e&&t.hasOwnProperty(e)){let n=t[e];return{icon:n.icon,type:n.type,color:n.color}}return null}export function importJS(e,t){import(e).then((e=>{void 0===e.default?t(e):t(e.default)}))}export function importJSPromise(e,t){e.then((e=>{void 0===e.default?t(e):t(e.default)}))}export function extend(e){e=e||{};for(let t=1;t<arguments.length;t++)if(arguments[t])for(let n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e}export const args=base.multipleConstructorClass;export const merge=base.mergeObject;export const mergeClass=base.mergeClass;export const mergeStyle=base.mergeStyle;export function documentReady(e){elemReady(document,(()=>{setting.theme=setting.theme,authCheck(e)}))}export function elemReady(e,t){if("loading"!=e.readyState)t();else if(document.addEventListener)e.addEventListener("DOMContentLoaded",t,!1),setupEventListenerRemover("elemReady",e,(()=>{deleteEventListener("elemReady",e,(()=>{e.removeEventListener("DOMContentLoaded",t,!1)}))}));else{let n=()=>{"complete"==document.readyState&&t()};e.attachEvent("onreadystatechange",n),setupEventListenerRemover("elemReady",e,(()=>{deleteEventListener("elemReady",e,(()=>{e.detachEvent("onreadystatechange",n)}))}))}}function authCheck(e){let t=new URLSearchParams(window.location.search),n=t.get("validateUser"),r=t.get("resetPassword");n||r?importJS("./user.js",(e=>{n?e.validate(n,(()=>{new e.signin({msg:"Email validated. Please sign in to continue.",callback:()=>{window.location=window.location.origin+window.location.pathname}}).show()})):r&&new e.changepass_guest({token:r,callback:()=>{new e.signin({msg:"Password changed. Please use your new password to sign in.",callback:()=>{window.location=window.location.origin+window.location.pathname}}).show()}}).show()})):e()}export function countElement(e){let t=e.childNodes,n=t.length;return t.forEach((e=>{n+=countElement(e)})),n}export function getValue(e){if(e){let t=e.querySelectorAll("[name]");if(t&&t.length>0){let e={};return t.forEach((t=>{let n=t.getAttribute("type"),r=t.getAttribute("name");switch(n){case"radio":e.hasOwnProperty(r)||(e[r]=null),t.checked&&(e[r]=t.value);break;case"checkbox":e.hasOwnProperty(r)||(e[r]=[]),t.checked&&e[r].push(t.value);break;case"number":case"range":e[r]=parseNumber(t.value);default:e[r]=t.value?t.value:null}})),e}switch(e.getAttribute("type")){case"radio":case"checkbox":return e.checked;case"number":case"range":return parseNumber(e.value);default:return e.value?e.value:null}}return null}export function setValue(e,t){if(e){let n=e.querySelectorAll("[name]");if(n&&n.length>0)n.forEach((e=>{let n=t[e.getAttribute("name")];if(n){switch(e.getAttribute("type")){case"radio":e.checked=e.value===n;break;case"checkbox":Array.isArray(n)?e.checked=n.includes(e.value):e.checked=n===e.value;break;default:e.value=n}}}));else{switch(e.getAttribute("type")){case"radio":case"checkbox":e.checked=t;break;default:e.value=t}}}}function isFloat(e){return parseFloat(e.match(/^-?\d*(\.\d+)?$/))>0}function parseNumber(e){return isNaN(e)?e:isFloat(e)?Number.parseFloat(e):Number.parseInt(e)}export function focusElement(e,t){t=extend({},{behavior:"smooth",block:"start"},t),e?.scrollIntoView(t)}function getElementValue(e){switch(e.getAttribute("type")){case"radio":case"checkbox":if(e.checked)return e.value;break;case"number":case"range":return parseNumber(e.value);default:return e.value}return null}function validateElem(e){let t=getElementValue(e);return(!e.hasAttribute("required")||null!==t&&""!==t)&&(!(e.hasAttribute("minlength")&&t.length<parseInt(e.getAttribute("minlength")))&&(!(e.hasAttribute("maxlenght")&&t.length<parseInt(e.getAttribute("maxlenght")))&&!("email"===e.getAttribute("type")&&!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t))))}export function validate(e,t){var n=e.querySelectorAll("[name]");if(n){e.classList.remove("was-validated"),n.forEach((e=>{e.classList.remove("is-invalid"),e.classList.remove("is-valid"),e.setCustomValidity(null),validateElem(e)?e.classList.add("is-valid"):(e.classList.add("is-invalid"),e.setCustomValidity("invalid"))}));var r=e.querySelectorAll(".is-invalid");if("function"!=typeof t)return!(r&&r.length>0);r&&r.length>0?t(!1):t(!0)}}export function multiClass(e,t){return base.multiClass(e,t)}export function attachBadge(e){return base.attachBadge(e)}export function attachTooltip(e){return base.attachTooltip(e)}export function attachPopover(e){return base.attachPopover(e)}export function combineArray(e,t){return base.combineArray(e,t)}export function UUID(e){return base.UUID(e)}export function isHTML(e){return base.isHTML(e)}export function elemInfo(e){return base.elemInfo(e)}export function detachEventListener(e){base.detachEventListener(e)}export function removeChildElement(e){base.removeChildElement(e)}export function removeElement(e){base.removeElement(e)}export function appendChild(e,t){return base.appendChild(e,t)}export function prependChild(e,t){return base.prependChild(e,t)}export function replaceWith(e,t){return base.replaceWith(e,t)}export function replaceChild(e,t){return base.replaceChild(e,t)}export function setupEventListenerRemover(e,t,n){base.setupEventListenerRemover(e,t,n)}export function deleteEventListener(e,t,n){base.deleteEventListener(e,t,n)}export function init(e){base.init(e)}export function html(e){return base.html(e)}export function node(e){return base.node(e)}